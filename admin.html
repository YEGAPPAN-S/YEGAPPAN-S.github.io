<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Yegappan Portfolio</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    
    <!-- TinyMCE Editor -->
<script src="https://cdn.jsdelivr.net/npm/tinymce@6/tinymce.min.js"></script>    
    <!-- CSS -->
    <link rel="stylesheet" href="./assets/css/admin.css">
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="login-screen">
        <div class="login-box">
            <div class="login-header">
                <h1>Admin Panel</h1>
                <p>Sign in to manage your portfolio</p>
            </div>
            
            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required autocomplete="current-password">
                </div>
                
                <div class="form-error" id="login-error"></div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="uil uil-lock"></i>
                    Sign In
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="admin-container" id="admin-dashboard" style="display: none;">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>Admin Panel</h2>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-view="posts">
                    <i class="uil uil-file-edit-alt"></i>
                    Posts
                </a>
                <a href="#" class="nav-item" data-view="new-post">
                    <i class="uil uil-plus"></i>
                    New Post
                </a>
                <a href="#" class="nav-item" data-view="settings">
                    <i class="uil uil-setting"></i>
                    Settings
                </a>
                <a href="./index.html" class="nav-item" target="_blank">
                    <i class="uil uil-eye"></i>
                    View Site
                </a>
                <a href="#" class="nav-item" id="logout-btn">
                    <i class="uil uil-signout"></i>
                    Logout
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <header class="admin-header">
                <h1 id="page-title">All Posts</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="sync-status">
                        <i class="uil uil-sync"></i>
                        <span>Synced</span>
                    </button>
                </div>
            </header>

            <!-- Posts View -->
            <div class="admin-view" id="posts-view">
                <div class="posts-header">
                    <div class="search-box">
                        <i class="uil uil-search"></i>
                        <input type="text" id="posts-search" placeholder="Search posts...">
                    </div>
                    
                    <select id="filter-status">
                        <option value="all">All Status</option>
                        <option value="published">Published</option>
                        <option value="draft">Draft</option>
                    </select>
                </div>

                <div class="posts-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="posts-list">
                            <!-- Posts will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- New/Edit Post View -->
            <div class="admin-view" id="post-editor-view" style="display: none;">
                <form class="post-editor" id="post-form">
                    <div class="editor-main">
                        <div class="form-group">
                            <input type="text" id="post-title-input" class="post-title-input" placeholder="Enter post title..." required>
                        </div>

                        <div class="form-group">
                            <label>Post Content</label>
                            <textarea id="post-content-editor"></textarea>
                        </div>
                    </div>

                    <div class="editor-sidebar">
                        <div class="sidebar-section">
                            <h3>Publish</h3>
                            <div class="form-group">
                                <label>Status</label>
                                <select id="post-status">
                                    <option value="draft">Draft</option>
                                    <option value="published">Published</option>
                                </select>
                            </div>
                            <div class="publish-actions">
                                <button type="submit" class="btn btn-primary btn-full">
                                    <i class="uil uil-check"></i>
                                    Publish
                                </button>
                                <button type="button" class="btn btn-secondary btn-full" id="save-draft-btn">
                                    <i class="uil uil-save"></i>
                                    Save Draft
                                </button>
                            </div>
                        </div>

                        <div class="sidebar-section">
                            <h3>Featured Image</h3>
                            <div class="featured-image-wrapper">
                                <div class="image-upload" id="image-upload-area">
                                    <input type="file" id="featured-image-input" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder" id="upload-placeholder">
                                        <i class="uil uil-image-plus"></i>
                                        <p>Click to upload image</p>
                                    </div>
                                    <img id="featured-image-preview" style="display: none;">
                                    <button type="button" class="remove-image" id="remove-image-btn" style="display: none;">
                                        <i class="uil uil-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="sidebar-section">
                            <h3>Category</h3>
                            <div class="form-group">
                                <select id="post-category">
                                    <option value="">Select category</option>
                                    <option value="WordPress">WordPress</option>
                                    <option value="Web Development">Web Development</option>
                                    <option value="Design">Design</option>
                                    <option value="Tutorial">Tutorial</option>
                                    <option value="Tips & Tricks">Tips & Tricks</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <input type="text" id="new-category" placeholder="Add new category">
                                <button type="button" class="btn btn-small" id="add-category-btn">Add</button>
                            </div>
                        </div>

                        <div class="sidebar-section">
                            <h3>Tags</h3>
                            <div class="form-group">
                                <input type="text" id="post-tags" placeholder="Enter tags (comma separated)">
                                <small>Separate tags with commas</small>
                            </div>
                        </div>

                        <div class="sidebar-section">
                            <h3>SEO</h3>
                            <div class="form-group">
                                <label>Meta Description</label>
                                <textarea id="post-excerpt" rows="3" placeholder="Brief description for SEO..."></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Settings View -->
            <div class="admin-view" id="settings-view" style="display: none;">
                <div class="settings-container">
                    <div class="settings-section">
                        <h2>GitHub Settings</h2>
                        <p>Configure your GitHub repository connection for auto-publishing posts.</p>
                        
                        <form class="settings-form" id="github-settings-form">
                            <div class="form-group">
                                <label>GitHub Username</label>
                                <input type="text" id="github-username" value="YEGAPPAN-S" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label>Repository Name</label>
                                <input type="text" id="github-repo" value="YEGAPPAN-S.github.io" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label>Personal Access Token</label>
                                <input type="password" id="github-token" placeholder="ghp_...">
                                <small>Your GitHub token is stored securely in your browser</small>
                            </div>
                            
                            <div class="form-group">
                                <button type="button" class="btn btn-primary" id="save-github-settings">
                                    <i class="uil uil-check"></i>
                                    Save Settings
                                </button>
                                <button type="button" class="btn btn-secondary" id="test-connection">
                                    <i class="uil uil-link"></i>
                                    Test Connection
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="settings-section">
                        <h2>Change Password</h2>
                        <form class="settings-form" id="change-password-form">
                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password" id="current-password" required>
                            </div>
                            
                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password" id="new-password" required>
                            </div>
                            
                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <input type="password" id="confirm-password" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="uil uil-lock"></i>
                                Update Password
                            </button>
                        </form>
                    </div>

                    <div class="settings-section">
                        <h2>Data Management</h2>
                        <div class="data-actions">
                            <button class="btn btn-secondary" id="export-data">
                                <i class="uil uil-download-alt"></i>
                                Export All Posts
                            </button>
                            <button class="btn btn-secondary" id="import-data">
                                <i class="uil uil-upload-alt"></i>
                                Import Posts
                            </button>
                            <input type="file" id="import-file" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="uil uil-check-circle"></i>
        <span id="toast-message"></span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loader"></div>
        <p id="loading-message">Processing...</p>
    </div>

    <!-- Scripts -->
    <script src="./assets/js/github-api.js"></script>
    <script src="./assets/js/admin.js"></script>
</body>
</html>
